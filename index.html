<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Be My Val</title>

  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a1030;
      --text:#e5e7eb;
      --muted:#a3a3a3;
      --accent:#ff4d6d;
      --yes:#22c55e;
      --no:#ef4444;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 20%, rgba(255,77,109,.22), transparent 60%),
        radial-gradient(1200px 800px at 80% 80%, rgba(167,139,250,.20), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    .wrap{
      width:min(560px, 92vw);
      padding:26px;
      border:1px solid rgba(255,255,255,.08);
      border-radius:22px;
      background: rgba(15,23,42,.55);
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    h1{margin:0 0 8px;font-weight:800;letter-spacing:-.02em}
    p{margin:0 0 18px;color:var(--muted);line-height:1.45}

    .center-btn{
      padding:14px 18px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,77,109,.18);
      color:var(--text);
      cursor:pointer;
      transition:.2s;
    }
    .center-btn:hover{ transform: translateY(-1px); background: rgba(255,77,109,.26); }
    .center-btn:disabled{ opacity:.65; cursor:default; transform:none; }

    .hint{ margin-top:10px; color:rgba(229,231,235,.75); font-size:13px; min-height:18px; }

    .stage{
      margin:18px auto 0;
      height:320px;
      display:grid;
      place-items:center;
      position:relative;
    }

    .fx-layer{
      position:absolute;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      border-radius:22px;
    }

    .float-emoji{
      position:absolute;
      opacity:0;
      transform: translateY(0) scale(.9);
      animation: floatUp 1.7s ease-out forwards;
    }
    @keyframes floatUp{
      0%{ opacity:0; transform: translateY(0) scale(.85); }
      10%{ opacity:1; }
      100%{ opacity:0; transform: translateY(-260px) scale(1.35); }
    }

    /* HEART */
    .heart-wrap{
      width:140px;
      height:140px;
      position:relative;
      opacity:0;
      pointer-events:none;
      cursor:pointer;
      filter: drop-shadow(0 18px 40px rgba(255,77,109,.35));
    }

    .heart-wrap::before,
    .heart-wrap::after{
      content:"";
      position:absolute;
      width:70px;
      height:110px;
      background: linear-gradient(180deg, var(--accent), #ff2d55);
      border-radius:70px 70px 0 0;
      top:20px;
    }
    .heart-wrap::before{
      left:70px;
      transform: rotate(-45deg);
      transform-origin: 0 100%;
    }
    .heart-wrap::after{
      left:0;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }

    .started .heart-wrap{
      opacity:1;
      pointer-events:auto;
      animation: beat 1.25s ease-in-out infinite;
    }
    @keyframes beat{
      0%{transform:scale(1)}
      25%{transform:scale(1.05)}
      50%{transform:scale(1)}
      75%{transform:scale(1.06)}
      100%{transform:scale(1)}
    }

    .revealed .heart-wrap{
      animation: floaty 2.8s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translateY(0) scale(1); }
      50%{ transform: translateY(-10px) scale(1.02); }
      100%{ transform: translateY(0) scale(1); }
    }

    .heart-wrap.broken::before,
    .heart-wrap.broken::after{ display:none; }

    .heart-wrap.broken{
      display:grid;
      place-items:center;
    }

    .heart-wrap.broken .broken-emoji{
      font-size:74px;
      animation: crack .5s ease both;
    }
    @keyframes crack{
      0%{ transform: scale(.7); opacity:0; }
      100%{ transform: scale(1); opacity:1; }
    }

    .prompt{
      width:min(430px, 92%);
      margin:18px auto 0;
      padding:18px 16px;
      border-radius:18px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      opacity:0;
      transform: translateY(12px);
      pointer-events:none;
    }

    .revealed .prompt{
      opacity:1;
      transform: translateY(0);
      pointer-events:auto;
    }

    .question{ font-size:22px; font-weight:800; margin-bottom:12px; }
    .actions{ display:flex; gap:10px; justify-content:center; }

    .btn{
      padding:12px 18px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      font-weight:700;
    }

    .btn-yes{ background: rgba(34,197,94,.18); }
    .btn-no{ background: rgba(239,68,68,.14); }

    .status{ margin-top:12px; font-size:14px; color:var(--muted); min-height:18px; }
    .small{ font-size:12px; color:rgba(229,231,235,.75); margin-top:10px; min-height:16px; }
  </style>
</head>

<body>
  <main class="wrap" id="wrap">
    <div class="fx-layer" id="fx"></div>

    <h1>Hey Chinelo Favour ðŸ’•</h1>
    <p>
      Hi FiFiâ€¦<br>
      I know this is a little extra, but you mean a lot to me and I wanted to do
      something sweet and different. Just take a breath, smile, and tap the button.
    </p>

    <button class="center-btn" id="startBtn">ðŸ’Œ Tap to start</button>
    <div class="hint" id="hint"></div>

    <div class="stage">
      <div class="heart-wrap" id="heart"></div>

      <div class="prompt" id="prompt">
        <div class="question">Will you be my Val?</div>
        <div class="actions">
          <button class="btn btn-yes" id="yesBtn">Yes</button>
          <button class="btn btn-no" id="noBtn">No</button>
        </div>
        <div class="status" id="status"></div>
        <div class="small" id="smallNote"></div>
      </div>
    </div>
  </main>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

  <script>
    // ========= FILL THESE IN (EmailJS) =========
    const EMAILJS_PUBLIC_KEY = "1h0ZBq00r5BkGpSY2";
    const EMAILJS_SERVICE_ID = "service_gdd70mo";
    const EMAILJS_TEMPLATE_ID = "template_q3or475";
    // ==========================================

    const PERSON_NAME = "Chinelo Favour (FiFi)";

    const wrap = document.getElementById("wrap");
    const fx = document.getElementById("fx");
    const startBtn = document.getElementById("startBtn");
    const heart = document.getElementById("heart");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const statusEl = document.getElementById("status");
    const smallNote = document.getElementById("smallNote");
    const hint = document.getElementById("hint");

    let started = false;
    let revealed = false;
    let decided = false;

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function spawn(emoji, count){
      for(let i=0;i<count;i++){
        const e=document.createElement("div");
        e.className="float-emoji";
        e.textContent=emoji;
        e.style.left=rand(5,95)+"%";
        e.style.bottom=rand(10,80)+"px";
        e.style.fontSize=rand(14,28)+"px";
        fx.appendChild(e);
        setTimeout(()=>e.remove(),2000);
      }
    }

    function emailConfigured(){
      return !(
        EMAILJS_PUBLIC_KEY.startsWith("YOUR_") ||
        EMAILJS_SERVICE_ID.startsWith("YOUR_") ||
        EMAILJS_TEMPLATE_ID.startsWith("YOUR_")
      );
    }

    async function notify(choice){
      if(!emailConfigured()){
        return { ok:false, msg:"(Email not set up yet. Add your EmailJS keys.)" };
      }

      try{
        emailjs.init({ publicKey: EMAILJS_PUBLIC_KEY });

        const payload = {
          choice,
          name: PERSON_NAME,
          time: new Date().toLocaleString(),
          page: location.href
        };

        await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, payload);
        return { ok:true, msg:"(Notification sent âœ…)" };
      }catch(e){
        return { ok:false, msg:"(Couldnâ€™t send email. Check EmailJS settings.)" };
      }
    }

    startBtn.onclick=()=>{
      if(started) return;
      started=true;
      wrap.classList.add("started");
      hint.textContent="Now tap the heart â¤ï¸";
      startBtn.disabled=true;
    };

    heart.onclick=()=>{
      if(!started||revealed) return;
      revealed=true;
      wrap.classList.add("revealed");
      hint.textContent="Okayâ€¦ deep breath ðŸ˜…";
      statusEl.textContent="Choose honestly ðŸ˜„";
    };

    yesBtn.onclick=async()=>{
      if(decided) return;
      decided=true;

      yesBtn.disabled = true;
      noBtn.disabled = true;

      statusEl.textContent="Yessss ðŸ˜­ðŸ’–";
      smallNote.textContent="You just made my whole day.";

      spawn("ðŸ’–",25); spawn("âœ¨",20); spawn("ðŸ’•",18);

      const res = await notify("Yes");
      smallNote.textContent = `You just made my whole day. ${res.msg}`;
    };

    noBtn.onclick=async()=>{
      if(decided) return;
      decided=true;

      yesBtn.disabled = true;
      noBtn.disabled = true;

      heart.classList.add("broken");
      heart.innerHTML='<div class="broken-emoji">ðŸ’”</div>';

      statusEl.textContent="Ouch ðŸ˜­";
      smallNote.textContent="My heart just did a backflipâ€¦ we will try again next year.";

      spawn("ðŸ’”",28); spawn("ðŸ¥€",14);

      const res = await notify("No");
      smallNote.textContent = `My heart just did a backflipâ€¦ we will try again next year. ${res.msg}`;
    };
  </script>
</body>
</html>
